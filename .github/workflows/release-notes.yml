name: Release Notes Publisher

on: [pull_request]

jobs:
  create_release_notes_pr:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Create Pull Request
        id: cpr
        uses: peter-evans/create-pull-request@v3
        with:
          token: ${{ secrets.RELEASE_NOTES_PAT }}
          commit-message: "Created release note file 0.5.x.md"
          committer: l5io <ci@layer5.io>
          author: ${{ github.actor }} <${{ github.actor }}@users.noreply.github.com>
          signoff: true
          branch: docs/automated-release-notes
          delete-branch: true
          base: master
          title: '[Docs] Release Notes for Meshery 0.5.x'
          body: |
            An auto-generated pull request to document release notes for Meshery 0.5.x
          labels: |
            area/ci
            kind/chore
          # assignees:
          # reviewers:
          team-reviewers: |
            release-team
            maintainers
          # milestone: 1
          draft: false

      - name: Verify PR
        run: |
          echo "Pull Request Number - ${{ steps.cpr.outputs.pull-request-number }}"
          echo "Pull Request URL - ${{ steps.cpr.outputs.pull-request-url }}"
