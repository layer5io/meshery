<header>
    <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="{{ site.baseurl }}/">
            <div class="navbar-logo">
                {% include meshery-logo-text.svg %}<span class="font-weight-bold" style="vertical-align: bottom">{{ site.title }}</span
        >
      </div>
    </a>
    <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
      <ul class="navbar-nav mt-2 mt-lg-0">
        <!-- {% if site.repo %}
			<li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="{{ site.repo }}" target="_blank"><span>GitHub</span></a>
        </li>{% endif %} -->

        <!-- Internal links -->
        <!--lang is the variable that holds the lang abreviation ["en", "es", "tr"] -->
        <!-- for each lang value, we have a specific toc_lang.yml with the titles-->
        {% if lang == "en" %} {% assign nav_lang = site.data.nav.nav_en %} {% elsif lang == "es" %} {% assign nav_lang = site.data.nav.nav_es %} {% elsif lang == "tr" %} {% assign nav_lang = site.data.nav.nav_tr %} {% endif %} {% for link in nav_lang %}
        <li class="nav-item mr-4 mb-2 mb-lg-0">
            <a class="nav-link" href="{% if link.url %}{{ site.baseurl }}/{{ link.url }}{% else %}{{ link.external_url }}{% endif %}"><span>{{ link.title }}</span></a
          >
        </li>
        {% endfor %}

        </ul>
        </div>

        <!--Search Bar
    <div class="navbar-nav d-none d-lg-block"><input type="search" class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete="off"></div>-->

        <!-- meshery-custom-begin

	<div class="navbar-nav d-none d-lg-block">
          <a class="gh-source" data-gh-source="github" href="{{ site.repo }}" title="Go to repository" data-md-state="done">
          <div class="gh-source__repository">
            <i class="fab fa fa-github fa-2x" style='padding-right:20px; float:left; margin-top:5px'></i>
            {{ site.github_user }}/{{ site.github_repo }}
          <ul class="gh-source__facts"><li class="gh-source__fact" id='stars'></li><li id="forks" class="gh-source__fact"></li></ul></div></a>
            </div>
            </div>

            meshery-custom-end -->
            <!-- LANG dropdown -->
            <div class="version" class="nav-item  ml-md-auto ">
                <span class="text-white text-bold">{% if site.data.languages.language_word == blank %}Language{% else %}{{ site.data.language.language_word }}{% endif %} </span>
                <select onchange="window.location=this.value" class="appearance-none flex-1 w-full px-0 py-1 placeholder-gray-900 tracking-wide bg-white focus:outline-none" name="langSelection" id="langSelection">

                   <!-- extracting ALL the langs, not just the ACTUAL ONE -->

                <!--for all the langs -->
                {% for link in site.data.languages%}
                <!-- we get the lang selected, and put it to the right option  -->
                   {%- if lang==link.url -%}
                      {%- assign optionSelected = "selected" -%}
                      {%- else -%}
                      {%- assign optionSelected = "" -%}
                   {%- endif -%}

                   <!-- check if there is actually an /actual/page/ and recover it-->
                   {%- if page.url!=' ' and lang!='en' -%}
                        <!-- extract the current URL, WITHOUT lang slug -->
                        {%- capture langSlug -%}/{{lang}}{%- endcapture -%}
                        {%- if page.url contains  langSlug-%}
                          {%- capture currentUrl -%}{{page.url | remove_first:langSlug}}{%- endcapture -%}
                        {%- endif -%}
                   {%- else -%}
                      {%- if page.url!=' ' and lang=='en'-%}
                        {%- capture currentUrl -%}{{page.url }}{%- endcapture -%}
                      {%- else -%}
                        {%- assign currentUrl = ' ' -%}
                      {%- endif -%}
                   {%- endif -%}
                   <!-- for english remove the / -->
                   {%- if link.language=='en'-%}
                      <option {{ optionSelected }} value="{% if link.url %}{{ site.baseurl }}/{{ link.url }}{{ currentUrl | relative_url | remove_first:'/' }}{% endif %}" class="nav-item mr-4 mb-2 mb-lg-0">
                        <span>{{ link.title }} </span>
                      </option>
                    {%- else -%}
                      <option {{ optionSelected }} value="{% if link.url %}{{ site.baseurl }}/{{ link.url }}{{currentUrl }}{% endif %}" class="nav-item mr-4 mb-2 mb-lg-0">
                        <span>{{ link.title }} </span>
                      </option>
                   {%- endif -%}
                {% endfor %}
              </select>
            </div>
    </nav>
</header>

<!-- meshery-custom-begin

<script>
$(document).ready(function() {
  var url = "https://api.github.com/search/repositories?q={{ site.github_user }}/{{ site.github_repo }}";
  fetch(url, {
      headers: {"Accept":"application/vnd.github.preview"}
  }).then(function(e) {
    return e.json()
  }).then(function(r) {
     console.log(r.items[0])
     stars = r.items[0]['stargazers_count']
     forks = r.items[0]['forks_count']
     $('#stars').text(stars + " Stars")
     $('#forks').text(forks + " Forks")
  });
});
</script>

meshery-custom-end -->